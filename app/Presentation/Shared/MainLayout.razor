@inherits LayoutComponentBase

<MudThemeProvider />
<MudDialogProvider />
<MudSnackbarProvider />
<MudPopoverProvider />

<PageTitle>Presentation</PageTitle>

<MudLayout>
    <!-- AppBar en haut de l'application -->
    <MudAppBar Elevation="1" Style="@($"background:{Colors.Gray.Lighten3};")">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Edge="Edge.Start" OnClick="@ToggleDrawer" Style="@($"color:{Colors.DeepPurple.Accent4};")"/>
        <MudSpacer />
        <!-- Intégration du composant UserMenu dans l'AppBar -->
        <UserMenu ShowLogin="true" ShowRegister="true" />
    </MudAppBar>

    <!-- Drawer latéral pour la navigation -->
    <MudDrawer @bind-Open="_drawerOpen" Elevation="1" Variant="DrawerVariant.Persistent" Style="@($"color:{Colors.Gray.Lighten5}; background:{Colors.DeepPurple.Accent3};")">
        <MudDrawerHeader @onclick="NavigateHome" Style="@($"color:{Colors.Gray.Lighten5}; background:{Colors.DeepPurple.Accent4};")">
            <MudText Typo="Typo.h6" @onclick="NavigateHome" Style="cursor: pointer;">Matcha</MudText>
        </MudDrawerHeader>
        <!-- Intégration du composant NavMenu dans le Drawer -->
        <NavMenu />
    </MudDrawer>

    <!-- Contenu principal de l'application -->
    <MudMainContent Class="pt-16 px-4">
        <MudContainer Class="mt-6">
            @Body
            <MudScrollToTop TopOffset="100"
                            Selector="#unique_id_scroll_section"
                            VisibleCssClass="visible absolute"
                            HiddenCssClass="invisible">
                <MudButton Variant="Variant.Filled" StartIcon="@Icons.Material.Filled.ArrowUpward" Style="@($"color:{Colors.DeepPurple.Lighten5}; background:{Colors.DeepPurple.Accent3};")">
                    Go to top
                </MudButton>
            </MudScrollToTop>
        </MudContainer>
    </MudMainContent>
</MudLayout>

@code {
    private bool _drawerOpen = false;

    [Inject] private NavigationManager NavigationManager { get; set; }

    private void ToggleDrawer()
    {
        _drawerOpen = !_drawerOpen;
    }

    private void NavigateHome()
    {
        NavigationManager.NavigateTo("/");
    }
}
